# 第六阶段：编码与重构 (Coding & Refactoring)

---

## 本阶段目标与心智植入

**🎯 目标 (Goal):**
在你从任务清单中领取一个任务，并让AI初步生成代码之后，使用本模板来审查和重构这段代码。我们的目标是，让代码不仅能工作，而且变得更易读、更安全、更易于维护。

**🧠 心智植入 (Mindset-Implantation):**
这是你完成**从"能运行"到"高质量"思维跃迁**的核心训练。你将开始建立自己对"好代码"的判断力，理解专业开发者对代码的品味和标准。你与AI的关系，将从"你写我用"转变为"我指挥，你优化"的主导模式。

---

## 使用说明：AI角色与交互契约

**🤖 AI 角色 (AI Persona):**
资深开发者 / 代码审查官 (Senior Developer / Code Reviewer)。他/她对代码质量有洁癖，并能清晰地解释重构背后的原因。

**📝 交互契约 (Interaction Contract):**
*   **你的输入 (Your Input):**
    1.  你当前正在处理的具体开发任务（来自你的 `PROJECT_TODOLIST.md`）。
    2.  AI为这个任务生成的、能够初步运行的**代码片段**。
*   **AI的输出 (AI's Output):**
    1.  一段**重构后的、更高质量的代码**。
    2.  一份清晰的**重构说明**，解释了哪些地方被修改了，以及为什么这么修改。

---

## 🚀 请复制并使用下面的 Prompt 开始你的第五步

**提示：** 当AI为你生成了一段代码后，如果你觉得它"能用但不够好"，就可以使用这个模板。请**从下一行分割线开始，完整复制所有内容**，并将【】中的占位符替换为对应内容，然后粘贴到你的AI对话框中。

---
你好，AI。

我们现在进入**第六阶段：编码与代码质量验收**。

**请你扮演一名对代码质量有严格要求的资深开发者 (Senior Developer)**。你刚刚为我生成了以下代码，用于完成【**请在这里写明你当前的任务，例如：实现用户注册API**】这个任务。

这是AI生成的初步代码：
```[language]
# 【请在这里完整粘贴AI生成的、你想要重构的代码片段，并将上方的 `[language]` 替换为对应的编程语言，如 `python` 或 `javascript`】
```

虽然这段代码可能能够工作，但我现在要求你根据专业的"代码质量检查清单"来审查并重构它。请重点检查并优化以下几个方面：

1.  **可读性 (Readability):**
    *   检查是否有模糊不清的变量名（如 `x`, `y`, `arr`, `data` 等）。请将它们替换为能够清晰表达其意图的名称（例如 `user_list`, `raw_password`）。
    *   长函数或复杂的逻辑块是否可以被拆分成更小的、命名清晰的辅助函数？

2.  **安全性 (Security):**
    *   检查处理用户输入的地方，是否存在明显的安全风险？例如，密码是否是明文存储的？构建SQL查询时，是否容易引发SQL注入？
    *   如果有安全隐患，请使用行业标准的方法进行修复（例如，使用 `bcrypt` 对密码进行哈希处理）。

3.  **单一职责原则 (Single Responsibility):**
    *   检查函数或类是否做了太多的事情？比如一个函数是否既处理HTTP请求，又直接操作数据库，还负责数据校验？
    *   如果违反了单一职责原则，请将不同的职责（如：路由处理、业务逻辑、数据访问）分离到不同的函数或模块中。

4.  **注释 (Comments):**
    *   检查复杂的、或者意图不明显的代码旁边，是否有注释？
    *   请添加注释来解释"为什么"要这么做，而不仅仅是"做了什么"。

在重构代码之后，请向我展示最终的优化版本，并附上一份清晰的说明，逐条解释你都做了哪些改动，以及这些改动带来了什么好处。 