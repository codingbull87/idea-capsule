# 第四阶段成果：数据模型设计

---

## 1. 核心实体识别

根据我们的产品需求文档（PRD），当前版本的"想法胶囊"应用只包含一个核心的业务实体：

*   **想法胶囊 (Capsule)**：代表用户封存的每一条想法。

---

## 2. 数据字典 (Data Dictionary)

基于我们选择的 **MERN** 技术栈，我们将使用 **MongoDB** 作为数据库。因此，数据类型将遵循 `Mongoose` / `MongoDB` 的规范。

### 集合 (Collection): `capsules`

| 字段名 (Field Name) | 数据类型 (Data Type) | 是否可空 (Nullable) | 主键/索引 (Key/Index)       | 注释 (Comment)                                               |
| :------------------ | :------------------- | :------------------ | :-------------------------- | :----------------------------------------------------------- |
| `_id`               | `ObjectId`           | No                  | `Primary Key`               | 由MongoDB自动生成的唯一文档ID，天然具备时间戳信息。          |
| `content`           | `String`             | No                  |                             | 用户输入的核心想法内容。后端需要验证其长度（例如，1-500字符）。 |
| `createdAt`         | `Date`               | No                  | `Index (descending)`        | 文档的创建时间。将使用它对想法列表进行降序排序，以显示最新的想法。建议设置为自动生成当前时间。 |

---

## 3. 实体关系描述

在当前 V1.0 版本中，我们只有一个核心实体 `Capsule`，因此**不存在实体间的关系**。

在未来的版本中，如果我们引入"用户(User)"实体，那么 `User` 和 `Capsule` 之间将建立起"一对多"的关系（一个用户可以拥有多个想法胶囊）。

---

## 4. 命名规范建议

为了保证整个项目代码风格的一致性和高度的可读性，我们约定以下命名规范：

1.  **数据库 (MongoDB) 规范**:
    *   **集合 (Collections)**: 使用**复数形式的小写蛇形命名法 (plural_snake_case)** 或更简洁的**复数形式 (plural)**。
        *   推荐: `capsules`
        *   示例: `users`, `user_profiles`
    *   **字段 (Fields)**: 使用**小驼峰命名法 (camelCase)**。这与JavaScript的变量命名风格完全一致，可以减少前后端映射的认知成本。
        *   示例: `content`, `createdAt`, `userProfile`

2.  **API (JSON Payload) 规范**:
    *   **字段 (Keys)**: 同样使用**小驼峰命名法 (camelCase)**。
        *   理由: 这使得前端JavaScript代码可以直接使用后端返回的数据，无需进行任何格式转换。例如 `response.data.createdAt`。

遵循这套规范，可以确保从数据库到后端再到前端，我们的数据字段命名保持高度统一。 